{"openapi":"3.1.0","info":{"title":"AI Voice Survey Platform","description":"Backend API for managing AI-powered voice surveys","version":"1.0.0"},"paths":{"/":{"get":{"summary":"Root","description":"Root endpoint - health check.","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HealthCheckResponse"}}}}}}},"/health":{"get":{"summary":"Health Check","description":"Health check endpoint.","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HealthCheckResponse"}}}}}}},"/auth/login":{"post":{"tags":["oauth","auth"],"summary":"Login","description":"Login with email and password via Supabase.\n\nReturns JWT token for authenticated API requests.","operationId":"login_auth_login_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/auth/google/connect":{"get":{"tags":["oauth","oauth"],"summary":"Google Connect","description":"Initiate Google OAuth flow.\n\nReturns authorization URL for user to visit.","operationId":"google_connect_auth_google_connect_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OAuthConnectionResponse"}}}}},"security":[{"HTTPBearer":[]}]}},"/auth/google/callback":{"get":{"tags":["oauth"],"summary":"Google Callback","description":"Handle Google OAuth callback.\n\nExchanges authorization code for access tokens and stores them.","operationId":"google_callback_auth_google_callback_get","parameters":[{"name":"code","in":"query","required":true,"schema":{"type":"string","description":"Authorization code from Google","title":"Code"},"description":"Authorization code from Google"},{"name":"state","in":"query","required":true,"schema":{"type":"string","description":"CSRF state parameter","title":"State"},"description":"CSRF state parameter"},{"name":"error","in":"query","required":false,"schema":{"type":"string","description":"Error from OAuth provider","title":"Error"},"description":"Error from OAuth provider"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/auth/microsoft/connect":{"get":{"tags":["oauth"],"summary":"Microsoft Connect","description":"Initiate Microsoft OAuth flow.\n\nReturns authorization URL for user to visit.","operationId":"microsoft_connect_auth_microsoft_connect_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OAuthConnectionResponse"}}}}},"security":[{"HTTPBearer":[]}]}},"/auth/microsoft/callback":{"get":{"tags":["oauth"],"summary":"Microsoft Callback","description":"Handle Microsoft OAuth callback.\n\nExchanges authorization code for access tokens and stores them.","operationId":"microsoft_callback_auth_microsoft_callback_get","parameters":[{"name":"code","in":"query","required":true,"schema":{"type":"string","description":"Authorization code from Microsoft","title":"Code"},"description":"Authorization code from Microsoft"},{"name":"state","in":"query","required":true,"schema":{"type":"string","description":"CSRF state parameter","title":"State"},"description":"CSRF state parameter"},{"name":"error","in":"query","required":false,"schema":{"type":"string","description":"Error from OAuth provider","title":"Error"},"description":"Error from OAuth provider"},{"name":"error_description","in":"query","required":false,"schema":{"type":"string","description":"Error description","title":"Error Description"},"description":"Error description"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/auth/connections":{"get":{"tags":["oauth"],"summary":"Get Connections","description":"Get list of connected OAuth providers for current user.\n\nReturns which providers (Google, Microsoft) are connected.","operationId":"get_connections_auth_connections_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConnectedProvidersResponse"}}}}},"security":[{"HTTPBearer":[]}]}},"/auth/oauth/success":{"get":{"tags":["oauth"],"summary":"Oauth Success","description":"OAuth success page.","operationId":"oauth_success_auth_oauth_success_get","parameters":[{"name":"provider","in":"query","required":false,"schema":{"type":"string","default":"google","title":"Provider"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/auth/oauth/error":{"get":{"tags":["oauth"],"summary":"Oauth Error","description":"OAuth error page.","operationId":"oauth_error_auth_oauth_error_get","parameters":[{"name":"provider","in":"query","required":false,"schema":{"type":"string","default":"google","title":"Provider"}},{"name":"error","in":"query","required":false,"schema":{"type":"string","default":"Unknown error","title":"Error"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/auth/{provider}/disconnect":{"delete":{"tags":["oauth"],"summary":"Disconnect Provider","description":"Disconnect and revoke OAuth tokens for a provider.\n\nArgs:\n    provider: \"google\" or \"microsoft\"","operationId":"disconnect_provider_auth__provider__disconnect_delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"provider","in":"path","required":true,"schema":{"type":"string","title":"Provider"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DisconnectResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/forms/fetch":{"get":{"tags":["forms"],"summary":"Fetch Form Endpoint","description":"Fetch form structure from Google Forms or Microsoft Forms.\n\nAutomatically detects form type and fetches using appropriate API.\nRequires user to have connected OAuth for the respective provider.","operationId":"fetch_form_endpoint_forms_fetch_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"form_url","in":"query","required":true,"schema":{"type":"string","description":"Google or Microsoft Forms URL","title":"Form Url"},"description":"Google or Microsoft Forms URL"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Fetch Form Endpoint Forms Fetch Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/surveys":{"post":{"tags":["surveys"],"summary":"Create Survey","description":"Create a new survey from Google Form.\n\nRequires user to have Google OAuth connected.\nFetches form structure and creates survey in draft status.","operationId":"create_survey_surveys_post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateSurveyRequest"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SurveyResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["surveys"],"summary":"List Surveys","description":"List all surveys for the authenticated user.\n\nOptional status filter to show only surveys with specific status.","operationId":"list_surveys_surveys_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by status (draft, active, closed)","title":"Status"},"description":"Filter by status (draft, active, closed)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SurveyListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/surveys/{survey_id}":{"get":{"tags":["surveys"],"summary":"Get Survey","description":"Get a single survey by ID.\n\nReturns full survey data including questionnaire.\nUser must own the survey.","operationId":"get_survey_surveys__survey_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"survey_id","in":"path","required":true,"schema":{"type":"string","title":"Survey Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SurveyResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["surveys"],"summary":"Update Survey","description":"Update survey details.\n\nCan update form URL, terms, voice config, etc.\nIf form_url changes, will re-fetch form from Google Forms API.","operationId":"update_survey_surveys__survey_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"survey_id","in":"path","required":true,"schema":{"type":"string","title":"Survey Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateSurveyRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SurveyResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["surveys"],"summary":"Delete Survey","description":"Delete a survey and all related data.\n\nThis action cannot be undone.\nCASCADE deletes will remove contacts and call logs.","operationId":"delete_survey_surveys__survey_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"survey_id","in":"path","required":true,"schema":{"type":"string","title":"Survey Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/surveys/{survey_id}/voice-config":{"put":{"tags":["surveys"],"summary":"Update Voice Config","description":"Update voice agent configuration only.\n\nUpdates tone, instructions, call duration, and retry attempts.","operationId":"update_voice_config_surveys__survey_id__voice_config_put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"survey_id","in":"path","required":true,"schema":{"type":"string","title":"Survey Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VoiceConfigUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SurveyResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/surveys/{survey_id}/activate":{"post":{"tags":["surveys"],"summary":"Activate Survey","description":"Activate a survey (change status from draft to active).\n\nSurvey must have valid questionnaire and be in draft status.","operationId":"activate_survey_surveys__survey_id__activate_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"survey_id","in":"path","required":true,"schema":{"type":"string","title":"Survey Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SurveyResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/surveys/{survey_id}/deactivate":{"post":{"tags":["surveys"],"summary":"Deactivate Survey","description":"Deactivate a survey (change status to closed).\n\nStops accepting new responses for this survey.","operationId":"deactivate_survey_surveys__survey_id__deactivate_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"survey_id","in":"path","required":true,"schema":{"type":"string","title":"Survey Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SurveyResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/surveys/{survey_id}/export/csv":{"get":{"tags":["surveys"],"summary":"Export Survey Responses Csv","description":"Export survey responses as CSV file.\n\nGenerates a CSV file with all mapped responses from completed calls.\nEach row represents one participant, columns are questions.\n\nArgs:\n    survey_id: Survey ID to export\n    user_id: Authenticated user ID\n\nReturns:\n    CSV file download with survey responses","operationId":"export_survey_responses_csv_surveys__survey_id__export_csv_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"survey_id","in":"path","required":true,"schema":{"type":"string","title":"Survey Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/surveys/{survey_id}/contacts/upload":{"post":{"tags":["contacts"],"summary":"Upload Contacts","description":"Upload contacts from CSV file for a survey.\n\nCSV Format:\n```\nphone_number,participant_name,participant_email\n+1234567890,John Doe,john@example.com\n```","operationId":"upload_contacts_surveys__survey_id__contacts_upload_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"survey_id","in":"path","required":true,"schema":{"type":"string","title":"Survey Id"}}],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_contacts_surveys__survey_id__contacts_upload_post"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UploadContactsResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/surveys/{survey_id}/contacts":{"get":{"tags":["contacts"],"summary":"Get Contacts","description":"Get all contacts for a survey.","operationId":"get_contacts_surveys__survey_id__contacts_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"survey_id","in":"path","required":true,"schema":{"type":"string","title":"Survey Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ContactListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/surveys/callback/{survey_id}":{"post":{"tags":["contacts"],"summary":"Create Callback Contact","description":"Create a callback contact for inbound \"call me\" requests.\nNo authentication required - public endpoint.","operationId":"create_callback_contact_surveys_callback__survey_id__post","parameters":[{"name":"survey_id","in":"path","required":true,"schema":{"type":"string","title":"Survey Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Body_create_callback_contact_surveys_callback__survey_id__post"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/surveys/{survey_id}/calls/start":{"post":{"tags":["calls"],"summary":"Start Call Campaign","description":"Start voice call campaign for a survey.\n\nInitiates calls to all contacts in the survey who haven't been called yet.\n\nArgs:\n    survey_id: Survey UUID\n    background_tasks: FastAPI background tasks\n    user_id: Authenticated user ID\n\nReturns:\n    Campaign status with number of calls queued","operationId":"start_call_campaign_surveys__survey_id__calls_start_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"survey_id","in":"path","required":true,"schema":{"type":"string","title":"Survey Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Start Call Campaign Surveys  Survey Id  Calls Start Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/surveys/{survey_id}/calls/logs":{"get":{"tags":["calls"],"summary":"Get Call Logs","description":"Get call logs for a survey.\n\nReturns all call logs with status, responses, and transcripts.\n\nArgs:\n    survey_id: Survey UUID\n    user_id: Authenticated user ID\n\nReturns:\n    Dict with call logs list and total count","operationId":"get_call_logs_surveys__survey_id__calls_logs_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"survey_id","in":"path","required":true,"schema":{"type":"string","title":"Survey Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Call Logs Surveys  Survey Id  Calls Logs Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/campaigns/launch":{"post":{"tags":["campaigns","Campaigns"],"summary":"Launch Campaign","description":"Launch a survey campaign.\n\nThis is the main endpoint users hit when they click \"Start Campaign\".\nBackend automatically:\n1. Provisions phone number (if user doesn't have one)\n2. Creates SIP trunk (if needed)\n3. Initiates outbound calls to all contacts\n\nUser never interacts with Twilio/LiveKit directly!","operationId":"launch_campaign_campaigns_launch_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LaunchCampaignRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LaunchCampaignResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/campaigns/{survey_id}/status":{"get":{"tags":["campaigns","Campaigns"],"summary":"Get Campaign Status","description":"Get real-time campaign status and statistics.\n\nShows:\n- Total contacts\n- Calls completed, in progress, failed, pending\n- Completion percentage","operationId":"get_campaign_status_campaigns__survey_id__status_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"survey_id","in":"path","required":true,"schema":{"type":"string","title":"Survey Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CampaignStatusResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/campaigns/phone-number":{"get":{"tags":["campaigns","Campaigns"],"summary":"Get Phone Number Info","description":"Get user's phone number information.\n\nShows if they have a number provisioned and its details.","operationId":"get_phone_number_info_campaigns_phone_number_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PhoneNumberInfo"}}}}},"security":[{"HTTPBearer":[]}]}},"/campaigns/provision-number":{"post":{"tags":["campaigns","Campaigns"],"summary":"Provision Number Manually","description":"Manually provision a phone number for the user.\n\nUsually not needed since numbers are auto-provisioned on campaign launch,\nbut useful for pre-provisioning or testing.","operationId":"provision_number_manually_campaigns_provision_number_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/callbacks/request":{"post":{"tags":["callbacks","callbacks"],"summary":"Request Callback","description":"Submit a callback request to receive a survey call.\n\nSimplified flow:\n1. User submits name, phone, consent via callback link\n2. Create contact with consent=True\n3. Trigger outbound call immediately\n\nArgs:\n    request: Callback request data\n    background_tasks: FastAPI background tasks\n\nReturns:\n    CallbackResponse with success status","operationId":"request_callback_callbacks_request_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CallbackRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CallbackResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/webhooks/twilio/voice/{contact_id}":{"get":{"tags":["webhooks"],"summary":"Twilio Voice Webhook","description":"Twilio calls this when a call connects.\nCreates LiveKit room and returns TwiML to connect via SIP.\n\nArgs:\n    contact_id: Contact UUID\n    request: FastAPI request object\n\nReturns:\n    TwiML XML response","operationId":"twilio_voice_webhook_webhooks_twilio_voice__contact_id__get","parameters":[{"name":"contact_id","in":"path","required":true,"schema":{"type":"string","title":"Contact Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["webhooks"],"summary":"Twilio Voice Webhook","description":"Twilio calls this when a call connects.\nCreates LiveKit room and returns TwiML to connect via SIP.\n\nArgs:\n    contact_id: Contact UUID\n    request: FastAPI request object\n\nReturns:\n    TwiML XML response","operationId":"twilio_voice_webhook_webhooks_twilio_voice__contact_id__get","parameters":[{"name":"contact_id","in":"path","required":true,"schema":{"type":"string","title":"Contact Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/webhooks/twilio/recording":{"get":{"tags":["webhooks"],"summary":"Twilio Recording Webhook","description":"Twilio calls this when a recording is ready.\n\nArgs:\n    request: FastAPI request with recording data\n\nReturns:\n    Empty response","operationId":"twilio_recording_webhook_webhooks_twilio_recording_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}},"post":{"tags":["webhooks"],"summary":"Twilio Recording Webhook","description":"Twilio calls this when a recording is ready.\n\nArgs:\n    request: FastAPI request with recording data\n\nReturns:\n    Empty response","operationId":"twilio_recording_webhook_webhooks_twilio_recording_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/webhooks/twilio/status":{"get":{"tags":["webhooks"],"summary":"Twilio Status Webhook","description":"Twilio calls this with call status updates.\nUpdates call_logs with final status and duration.\n\nArgs:\n    request: FastAPI request with form data\n\nReturns:\n    Empty response","operationId":"twilio_status_webhook_webhooks_twilio_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}},"post":{"tags":["webhooks"],"summary":"Twilio Status Webhook","description":"Twilio calls this with call status updates.\nUpdates call_logs with final status and duration.\n\nArgs:\n    request: FastAPI request with form data\n\nReturns:\n    Empty response","operationId":"twilio_status_webhook_webhooks_twilio_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"Body_create_callback_contact_surveys_callback__survey_id__post":{"properties":{"phone_number":{"type":"string","title":"Phone Number"},"participant_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Participant Name"}},"type":"object","required":["phone_number"],"title":"Body_create_callback_contact_surveys_callback__survey_id__post"},"Body_upload_contacts_surveys__survey_id__contacts_upload_post":{"properties":{"file":{"type":"string","format":"binary","title":"File","description":"CSV file with contact data"}},"type":"object","required":["file"],"title":"Body_upload_contacts_surveys__survey_id__contacts_upload_post"},"CallbackRequest":{"properties":{"survey_id":{"type":"string","title":"Survey Id"},"participant_name":{"type":"string","title":"Participant Name"},"phone_number":{"type":"string","title":"Phone Number"},"email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Email"},"consent":{"type":"boolean","title":"Consent"},"preferred_time":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Preferred Time"}},"type":"object","required":["survey_id","participant_name","phone_number","consent"],"title":"CallbackRequest","description":"Callback request from user via callback link."},"CallbackResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"message":{"type":"string","title":"Message"},"contact_id":{"type":"string","title":"Contact Id"},"estimated_call_time":{"type":"string","title":"Estimated Call Time"}},"type":"object","required":["success","message","contact_id","estimated_call_time"],"title":"CallbackResponse","description":"Response after callback request submission."},"CampaignStatusResponse":{"properties":{"campaign_id":{"type":"string","title":"Campaign Id"},"status":{"type":"string","title":"Status"},"phone_number":{"type":"string","title":"Phone Number"},"total_contacts":{"type":"integer","title":"Total Contacts"},"completed_calls":{"type":"integer","title":"Completed Calls"},"in_progress_calls":{"type":"integer","title":"In Progress Calls"},"failed_calls":{"type":"integer","title":"Failed Calls"},"pending_calls":{"type":"integer","title":"Pending Calls"},"completion_percentage":{"type":"number","title":"Completion Percentage"}},"type":"object","required":["campaign_id","status","phone_number","total_contacts","completed_calls","in_progress_calls","failed_calls","pending_calls","completion_percentage"],"title":"CampaignStatusResponse","description":"Campaign status and statistics."},"ConnectedProvidersResponse":{"properties":{"google":{"type":"boolean","title":"Google"},"microsoft":{"type":"boolean","title":"Microsoft"}},"type":"object","required":["google","microsoft"],"title":"ConnectedProvidersResponse","description":"Response showing which OAuth providers are connected."},"ContactListResponse":{"properties":{"contacts":{"items":{"$ref":"#/components/schemas/ContactResponse"},"type":"array","title":"Contacts"},"total":{"type":"integer","title":"Total"}},"type":"object","required":["contacts","total"],"title":"ContactListResponse","description":"Response schema for list of contacts."},"ContactResponse":{"properties":{"contact_id":{"type":"string","format":"uuid","title":"Contact Id"},"survey_id":{"type":"string","format":"uuid","title":"Survey Id"},"phone_number":{"type":"string","title":"Phone Number"},"participant_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Participant Name"},"participant_email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Participant Email"},"participant_metadata":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Participant Metadata"},"callback":{"type":"string","title":"Callback"},"upload_timestamp":{"type":"string","format":"date-time","title":"Upload Timestamp"}},"type":"object","required":["contact_id","survey_id","phone_number","participant_name","participant_email","participant_metadata","callback","upload_timestamp"],"title":"ContactResponse","description":"Response schema for contact data."},"CreateSurveyRequest":{"properties":{"form_url":{"type":"string","title":"Form Url","description":"Google Form URL"},"terms_and_conditions":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Terms And Conditions","description":"Terms and conditions text (optional)"},"voice_agent_tone":{"type":"string","title":"Voice Agent Tone","description":"Voice agent tone","default":"friendly"},"voice_agent_instructions":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Voice Agent Instructions","description":"Custom instructions for voice agent"},"max_call_duration":{"type":"integer","title":"Max Call Duration","description":"Maximum call duration in minutes","default":5},"max_retry_attempts":{"type":"integer","title":"Max Retry Attempts","description":"Maximum retry attempts for failed calls","default":2}},"type":"object","required":["form_url"],"title":"CreateSurveyRequest","description":"Request schema for creating a new survey."},"DisconnectResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"provider":{"type":"string","title":"Provider"},"message":{"type":"string","title":"Message"}},"type":"object","required":["success","provider","message"],"title":"DisconnectResponse","description":"Response for OAuth disconnection."},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"HealthCheckResponse":{"properties":{"status":{"type":"string","title":"Status"},"timestamp":{"type":"string","format":"date-time","title":"Timestamp"},"version":{"type":"string","title":"Version","default":"1.0.0"}},"type":"object","required":["status","timestamp"],"title":"HealthCheckResponse","description":"Health check response."},"LaunchCampaignRequest":{"properties":{"survey_id":{"type":"string","title":"Survey Id"},"test_mode":{"type":"boolean","title":"Test Mode","default":false}},"type":"object","required":["survey_id"],"title":"LaunchCampaignRequest","description":"Request to launch a survey campaign."},"LaunchCampaignResponse":{"properties":{"status":{"type":"string","title":"Status"},"campaign_id":{"type":"string","title":"Campaign Id"},"phone_number":{"type":"string","title":"Phone Number"},"total_contacts":{"type":"integer","title":"Total Contacts"},"estimated_duration_minutes":{"type":"integer","title":"Estimated Duration Minutes"},"message":{"type":"string","title":"Message"}},"type":"object","required":["status","campaign_id","phone_number","total_contacts","estimated_duration_minutes","message"],"title":"LaunchCampaignResponse","description":"Response after launching campaign."},"LoginRequest":{"properties":{"email":{"type":"string","title":"Email"},"password":{"type":"string","title":"Password"}},"type":"object","required":["email","password"],"title":"LoginRequest","description":"Request for user login."},"LoginResponse":{"properties":{"access_token":{"type":"string","title":"Access Token"},"token_type":{"type":"string","title":"Token Type","default":"bearer"},"user_id":{"type":"string","title":"User Id"},"email":{"type":"string","title":"Email"},"name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Name"}},"type":"object","required":["access_token","user_id","email"],"title":"LoginResponse","description":"Response for successful login."},"OAuthConnectionResponse":{"properties":{"provider":{"type":"string","title":"Provider"},"auth_url":{"type":"string","title":"Auth Url"},"state":{"type":"string","title":"State"},"message":{"type":"string","title":"Message","default":"Please visit the auth_url to authorize"}},"type":"object","required":["provider","auth_url","state"],"title":"OAuthConnectionResponse","description":"Response for OAuth connection initiation."},"PhoneNumberInfo":{"properties":{"phone_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone Number"},"status":{"type":"string","title":"Status"},"provisioned_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Provisioned At"},"trunk_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Trunk Id"}},"type":"object","required":["phone_number","status","provisioned_at","trunk_id"],"title":"PhoneNumberInfo","description":"User's phone number information."},"SurveyListResponse":{"properties":{"surveys":{"items":{"$ref":"#/components/schemas/SurveyResponse"},"type":"array","title":"Surveys"},"total":{"type":"integer","title":"Total"}},"type":"object","required":["surveys","total"],"title":"SurveyListResponse","description":"Response schema for list of surveys."},"SurveyResponse":{"properties":{"survey_id":{"type":"string","format":"uuid","title":"Survey Id"},"user_id":{"type":"string","format":"uuid","title":"User Id"},"form_link":{"type":"string","title":"Form Link"},"json_questionnaire":{"additionalProperties":true,"type":"object","title":"Json Questionnaire"},"status":{"type":"string","title":"Status"},"voice_agent_tone":{"type":"string","title":"Voice Agent Tone"},"voice_agent_instructions":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Voice Agent Instructions"},"callback_link":{"type":"string","title":"Callback Link"},"max_call_duration":{"type":"integer","title":"Max Call Duration"},"max_retry_attempts":{"type":"integer","title":"Max Retry Attempts"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"terms_and_conditions":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Terms And Conditions"}},"type":"object","required":["survey_id","user_id","form_link","json_questionnaire","status","voice_agent_tone","voice_agent_instructions","callback_link","max_call_duration","max_retry_attempts","created_at","terms_and_conditions"],"title":"SurveyResponse","description":"Response schema for survey data."},"UpdateSurveyRequest":{"properties":{"form_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Form Url","description":"Google Form URL"},"terms_and_conditions":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Terms And Conditions","description":"Terms and conditions text"},"voice_agent_tone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Voice Agent Tone","description":"Voice agent tone"},"voice_agent_instructions":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Voice Agent Instructions","description":"Custom instructions for voice agent"},"max_call_duration":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Max Call Duration","description":"Maximum call duration in minutes"},"max_retry_attempts":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Max Retry Attempts","description":"Maximum retry attempts"}},"type":"object","title":"UpdateSurveyRequest","description":"Request schema for updating a survey."},"UploadContactsResponse":{"properties":{"contacts_added":{"type":"integer","title":"Contacts Added"},"upload_timestamp":{"type":"string","format":"date-time","title":"Upload Timestamp"},"filename":{"type":"string","title":"Filename"}},"type":"object","required":["contacts_added","upload_timestamp","filename"],"title":"UploadContactsResponse","description":"Response schema for contact upload."},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"VoiceConfigUpdate":{"properties":{"voice_agent_tone":{"type":"string","title":"Voice Agent Tone","description":"Voice agent tone"},"voice_agent_instructions":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Voice Agent Instructions","description":"Custom instructions"},"max_call_duration":{"type":"integer","title":"Max Call Duration","description":"Maximum call duration in minutes"},"max_retry_attempts":{"type":"integer","title":"Max Retry Attempts","description":"Maximum retry attempts"}},"type":"object","required":["voice_agent_tone","max_call_duration","max_retry_attempts"],"title":"VoiceConfigUpdate","description":"Request schema for updating voice configuration only."}},"securitySchemes":{"HTTPBearer":{"type":"http","scheme":"bearer"}}}}